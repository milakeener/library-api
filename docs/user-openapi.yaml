openapi: 3.0.3openapi: 3.0.3

info:info:

  title: Library API - User Endpoints  title: Library API - Users

  version: 1.0.0  version: '1.0.0'

  description: User resource endpoints with JWT authentication  description: User endpoints for the Library API (signup, login, profile) â€” Week 2 deliverable

servers:servers:

  - url: http://localhost:3000  - url: http://localhost:3000

components:components:

  securitySchemes:  securitySchemes:

    bearerAuth:    bearerAuth:

      type: http      type: http

      scheme: bearer      scheme: bearer

      bearerFormat: JWT      bearerFormat: JWT

paths:  schemas:

  /auth/signup:    User:

    post:      type: object

      summary: Register a new user      properties:

      requestBody:        id:

        required: true          type: integer

        content:        name:

          application/json:          type: string

            schema:        email:

              type: object          type: string

              required: [name, email, password]        role:

              properties:          type: string

                name:          description: Role of the user (USER | LIBRARIAN | ADMIN)

                  type: string      required: [id, name, email]

                email:

                  type: string    AuthRequest:

                password:      type: object

                  type: string      properties:

            example:        email:

              name: Test User          type: string

              email: test@example.com        password:

              password: Password123!          type: string

      responses:      required: [email, password]

        '201':

          description: User created    AuthResponse:

          content:      type: object

            application/json:      properties:

              schema:        accessToken:

                type: object          type: string

                properties:

                  id:paths:

                    type: integer  /auth/signup:

                  name:    post:

                    type: string      summary: Create a new user

                  email:      requestBody:

                    type: string        required: true

  /auth/login:        content:

    post:          application/json:

      summary: Login and get JWT            schema:

      requestBody:              type: object

        required: true              properties:

        content:                name:

          application/json:                  type: string

            schema:                email:

              type: object                  type: string

              required: [email, password]                password:

              properties:                  type: string

                email:              required: [name, email, password]

                  type: string            example:

                password:              name: Caleb Vannoy

                  type: string              email: caleb@example.com

            example:              password: Ex@mple!

              email: test@example.com      responses:

              password: Password123!        '201':

      responses:          description: Created user

        '200':          content:

          description: JWT token            application/json:

          content:              schema:

            application/json:                $ref: '#/components/schemas/User'

              schema:

                type: object  /auth/login:

                properties:    post:

                  accessToken:      summary: Login and receive JWT access token

                    type: string      requestBody:

  /users/me:        required: true

    get:        content:

      summary: Get current user info          application/json:

      security:            schema:

        - bearerAuth: []              $ref: '#/components/schemas/AuthRequest'

      responses:            example:

        '200':              email: caleb@example.com

          description: User info              password: Ex@mple!

          content:      responses:

            application/json:        '200':

              schema:          description: Access token

                type: object          content:

                properties:            application/json:

                  id:              schema:

                    type: integer                $ref: '#/components/schemas/AuthResponse'

                  name:

                    type: string  /users/me:

                  email:    get:

                    type: string      summary: Get current authenticated user

                  role:      security:

                    type: string        - bearerAuth: []

        '401':      responses:

          description: Unauthorized        '200':

          description: Current user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: Unauthorized

security:
  - {}